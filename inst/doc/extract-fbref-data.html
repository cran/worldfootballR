<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="Jason Zivkovic" />

<meta name="date" content="2021-11-25" />

<title>Extracting data from FBref</title>


<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>


<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<link href="data:text/css;charset=utf-8,body%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%201em%20auto%3B%0Amax%2Dwidth%3A%20700px%3B%0Aoverflow%3A%20visible%3B%0Apadding%2Dleft%3A%202em%3B%0Apadding%2Dright%3A%202em%3B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E35%3B%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%201%2E3%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%3A%201em%20auto%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%202px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0Aborder%2Dleft%2Dstyle%3A%20none%3B%0Aborder%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Ap%20%7B%0Amargin%3A%200%2E5em%200%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%200%2E25em%200%2E75em%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Apre%2C%20code%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0Acolor%3A%20%23333%3B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%20%0A%7D%0Apre%20%7B%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200px%2010px%200px%3B%0Apadding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0Afont%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Apadding%3A%202px%200px%3B%0A%7D%0Adiv%2Efigure%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0Aborder%3A%201px%20solid%20%23DDDDDD%3B%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Amargin%3A%200%205px%3B%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%202px%3B%0Afont%2Dsize%3A%20145%25%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%20120%25%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0Amargin%2Dleft%3A%208px%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%0A" rel="stylesheet" type="text/css" />




</head>

<body>




<h1 class="title toc-ignore">Extracting data from FBref</h1>
<h4 class="author">Jason Zivkovic</h4>
<h4 class="date">2021-11-25</h4>



<div id="overview" class="section level2">
<h2>Overview</h2>
<p>This package is designed to allow users to extract various world football results and player statistics from the following popular football (soccer) data sites:</p>
<ul>
<li><a href="https://fbref.com/en/">FBref</a></li>
<li><a href="https://www.transfermarkt.com/">Transfermarkt</a></li>
<li><a href="https://understat.com/">Understat</a></li>
</ul>
</div>
<div id="installation" class="section level2">
<h2>Installation</h2>
<p>You can install the <code>worldfootballR</code> package from github with:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># install.packages(&quot;devtools&quot;)</span>
devtools<span class="op">::</span><span class="kw">install_github</span>(<span class="st">&quot;JaseZiv/worldfootballR&quot;</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(worldfootballR)</code></pre></div>
<hr />
</div>
<div id="usage" class="section level2">
<h2>Usage</h2>
<p>Package vignettes have been built to help you get started with the package.</p>
<ul>
<li>For functions to extract data from FBref, see <a href="https://jaseziv.github.io/worldfootballR/articles/extract-fbref-data.html">here</a></li>
<li>For functions to extract data from Transfermarkt, see <a href="https://jaseziv.github.io/worldfootballR/articles/extract-transfermarkt-data.html">here</a></li>
<li>For functions to extract data from Understat, see <a href="https://jaseziv.github.io/worldfootballR/articles/extract-understat-data.html">here</a></li>
<li>For functions to extract data for international matches from FBref, see <a href="https://jaseziv.github.io/worldfootballR/articles/fbref-data-internationals.html">here</a></li>
</ul>
<p>This vignette will cover the functions to extract data from FBref.com.</p>
<hr />
</div>
<div id="join-fbref-and-transfermarkt-data" class="section level2">
<h2>Join FBref and Transfermarkt data</h2>
<p>To be able to join data player between FBref and Transfermarkt, <code>player_dictionary_mapping()</code> has been created. There are over 6,100 players who have been listed for teams in the Big 5 Euro leagues on FBref since the start of the 2017-18 seasons, with all of these mapped together. This is expected to be updated and grow over time. The raw data is stored <a href="https://github.com/JaseZiv/worldfootballR_data/blob/master/raw-data/fbref-tm-player-mapping/output/fbref_to_tm_mapping.csv">here</a></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mapped_players &lt;-<span class="st"> </span><span class="kw">player_dictionary_mapping</span>()
dplyr<span class="op">::</span><span class="kw">glimpse</span>(mapped_players)
<span class="co">#&gt; Rows: 6,300</span>
<span class="co">#&gt; Columns: 4</span>
<span class="co">#&gt; $ PlayerFBref &lt;chr&gt; &quot;Aaron Connolly&quot;, &quot;Aaron Cresswell&quot;, &quot;Aarón Escandell&quot;, &quot;A…</span>
<span class="co">#&gt; $ UrlFBref    &lt;chr&gt; &quot;https://fbref.com/en/players/27c01749/Aaron-Connolly&quot;, &quot;h…</span>
<span class="co">#&gt; $ UrlTmarkt   &lt;chr&gt; &quot;https://www.transfermarkt.com/aaron-connolly/profil/spiel…</span>
<span class="co">#&gt; $ TmPos       &lt;chr&gt; &quot;Centre-Forward&quot;, &quot;Left-Back&quot;, &quot;Goalkeeper&quot;, &quot;Attacking Mi…</span></code></pre></div>
</div>
<div id="fbref-helper-functions" class="section level2">
<h2>FBref Helper Functions</h2>
<p>The following section will outline the various functions available to find different URLs to be able to pass through the FBref suite of functions outlined in this vignette.</p>
<div id="league-urls" class="section level3">
<h3>League URLs</h3>
<p>To extract the URL of any country's league(s) (provided fbref have data for the league), use the <code>fb_league_urls()</code> function.</p>
<p>This function also accepts a <code>tier</code> argument. for first-tier leagues, select '1st', for second-tier select '2nd' and so on.</p>
<p>A fill list of countries available can be found in the <code>worldfootballR_data</code> repository and can be found <a href="https://github.com/JaseZiv/worldfootballR_data/blob/master/raw-data/all_leages_and_cups/all_competitions.csv">here</a>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">fb_league_urls</span>(<span class="dt">country =</span> <span class="st">&quot;ENG&quot;</span>, <span class="dt">gender =</span> <span class="st">&quot;M&quot;</span>, <span class="dt">season_end_year =</span> <span class="dv">2021</span>, <span class="dt">tier =</span> <span class="st">'2nd'</span>)</code></pre></div>
</div>
<div id="team-urls" class="section level3">
<h3>Team URLs</h3>
<p>To get a list of URLs for each team in a particular season, the <code>fb_teams_urls()</code> function can be used:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">fb_teams_urls</span>(<span class="st">&quot;https://fbref.com/en/comps/9/Premier-League-Stats&quot;</span>)</code></pre></div>
</div>
<div id="player-urls" class="section level3">
<h3>Player URLs</h3>
<p>To get a list of player URLs for a particular team, the <code>fb_player_urls()</code> function can be used. The results of this output can be passed through to the player season stat functions <code>fb_player_season_stats()</code> and <code>fb_player_scouting_report()</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">fb_player_urls</span>(<span class="st">&quot;https://fbref.com/en/squads/fd962109/Fulham-Stats&quot;</span>)</code></pre></div>
</div>
<div id="get-match-urls" class="section level3">
<h3>Get match urls</h3>
<p>To get the match URLs needed to pass in to some of the match-level functions below, <code>get_match_urls()</code> can be used:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">epl_2021_urls &lt;-<span class="st"> </span><span class="kw">get_match_urls</span>(<span class="dt">country =</span> <span class="st">&quot;ENG&quot;</span>, <span class="dt">gender =</span> <span class="st">&quot;M&quot;</span>, <span class="dt">season_end_year =</span> <span class="dv">2021</span>, <span class="dt">tier=</span><span class="st">&quot;1st&quot;</span>)</code></pre></div>
</div>
</div>
<div id="league-season-level-data" class="section level2">
<h2>League Season-Level Data</h2>
<p>This section will cover the functions to aid in the extraction of season team statistics.</p>
<div id="get-season-team-stats" class="section level3">
<h3>Get Season Team Stats</h3>
<p>The <code>get_season_team_stats</code> function allows the user to return a data frame of different stat types for all teams in Domestic leagues <a href="https://github.com/JaseZiv/worldfootballR_data/blob/master/raw-data/all_leages_and_cups/all_competitions.csv">here</a>.</p>
<p>Note, some stats may not be available for all leagues. The big five European leagues should have all of these stats.</p>
<p>The following stat types can be selected:</p>
<ul>
<li><em>league_table</em></li>
<li><em>league_table_home_away</em></li>
<li><em>standard</em></li>
<li><em>keeper</em></li>
<li><em>keeper_adv</em></li>
<li><em>shooting</em></li>
<li><em>passing</em></li>
<li><em>passing_types</em></li>
<li><em>goal_shot_creation</em></li>
<li><em>defense</em></li>
<li><em>possession</em></li>
<li><em>playing_time</em></li>
<li><em>misc</em></li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># function to extract season teams stats</span>
prem_2020_shooting &lt;-<span class="st"> </span><span class="kw">get_season_team_stats</span>(<span class="dt">country =</span> <span class="st">&quot;ENG&quot;</span>, <span class="dt">gender =</span> <span class="st">&quot;M&quot;</span>, <span class="dt">season_end_year =</span> <span class="st">&quot;2020&quot;</span>, <span class="dt">tier =</span> <span class="st">&quot;1st&quot;</span>, <span class="dt">stat_type =</span> <span class="st">&quot;shooting&quot;</span>)
<span class="co"># to get shooting stats for the English Championship:</span>
championship_2020_shooting &lt;-<span class="st"> </span><span class="kw">get_season_team_stats</span>(<span class="dt">country =</span> <span class="st">&quot;ENG&quot;</span>, <span class="dt">gender =</span> <span class="st">&quot;M&quot;</span>, <span class="dt">season_end_year =</span> <span class="st">&quot;2020&quot;</span>, <span class="dt">tier =</span> <span class="st">&quot;2nd&quot;</span>, <span class="dt">stat_type =</span> <span class="st">&quot;shooting&quot;</span>)</code></pre></div>
<div id="more-than-one-league-season" class="section level4">
<h4>More than one league season</h4>
<p>The <code>get_season_team_stats</code> function can be used to get data for multiple seasons/leagues/genders/etc.</p>
<p>Important to note, this function can only be used for one <code>stat-type</code> at a time, however all other parameters can have multiple values:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">big_5_2020_possessions &lt;-<span class="st"> </span><span class="kw">get_season_team_stats</span>(<span class="dt">country =</span> <span class="kw">c</span>(<span class="st">&quot;ENG&quot;</span>, <span class="st">&quot;ESP&quot;</span>, <span class="st">&quot;ITA&quot;</span>, <span class="st">&quot;GER&quot;</span>, <span class="st">&quot;FRA&quot;</span>),
                                        <span class="dt">gender =</span> <span class="st">&quot;M&quot;</span>, <span class="dt">season_end_year =</span> <span class="dv">2020</span>, <span class="dt">tier =</span> <span class="st">&quot;1st&quot;</span>, <span class="dt">stat_type =</span> <span class="st">&quot;possession&quot;</span>)</code></pre></div>
</div>
<div id="the-big-5-euro-leagues" class="section level4">
<h4>The Big 5 Euro Leagues</h4>
<p>The <code>fb_big5_advanced_season_stats()</code> function allows users to extract data for any of the below listed stat types for all teams of the big five European leagues (EPL, La Liga, Ligue 1, Serie A, Bundesliga).</p>
<p>The stat types available for this function are below:</p>
<ul>
<li><em>standard</em></li>
<li><em>shooting</em></li>
<li><em>passing</em></li>
<li><em>passing_types</em></li>
<li><em>gca</em></li>
<li><em>defense</em></li>
<li><em>possession</em></li>
<li><em>playing_time</em></li>
<li><em>misc</em></li>
<li><em>keepers</em></li>
<li><em>keepers_adv</em></li>
</ul>
<p>The function also accepts a season or seasons and whether you want data for the player, or team.</p>
<p>Note that when selecting <code>team_or_player=&quot;team&quot;</code>, results will be returned for both the team's for and against stats. To filter on this, use the <code>Team_or_Opponent</code> column in the resulting data frame, selecting 'team' if you want the team's for stats, or 'opponent' if you want the team's against stats.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">big5_team_shooting &lt;-<span class="st"> </span><span class="kw">fb_big5_advanced_season_stats</span>(<span class="dt">season_end_year=</span> <span class="kw">c</span>(<span class="dv">2019</span><span class="op">:</span><span class="dv">2021</span>), <span class="dt">stat_type=</span> <span class="st">&quot;shooting&quot;</span>, <span class="dt">team_or_player=</span> <span class="st">&quot;team&quot;</span>)</code></pre></div>
<hr />
</div>
</div>
</div>
<div id="match-level-data" class="section level2">
<h2>Match-Level Data</h2>
<p>The following sections outlines the functions available to extract data at the per-match level</p>
<div id="get-match-results" class="section level3">
<h3>Get match results</h3>
<p>To get the match results (and additional metadata) for all leagues and comps listed <a href="https://github.com/JaseZiv/worldfootballR_data/blob/master/raw-data/all_leages_and_cups/all_competitions.csv">here</a>, the following function can be used:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># function to extract Serie A match results data</span>
serieA_<span class="dv">2020</span> &lt;-<span class="st"> </span><span class="kw">get_match_results</span>(<span class="dt">country =</span> <span class="st">&quot;ITA&quot;</span>, <span class="dt">gender =</span> <span class="st">&quot;M&quot;</span>, <span class="dt">season_end_year =</span> <span class="dv">2020</span>, <span class="dt">tier =</span> <span class="st">&quot;1st&quot;</span>)</code></pre></div>
<p>The function can also be used to return match URLs for a non-domestic league season. To use this functionality, simply leave <code>country = ''</code> and pass the non-domestic league URL, which can be found at <a href="https://fbref.com/en/comps/" class="uri">https://fbref.com/en/comps/</a></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># for international friendlies:</span>
<span class="kw">get_match_results</span>(<span class="dt">country =</span> <span class="st">&quot;&quot;</span>, <span class="dt">gender =</span> <span class="st">&quot;M&quot;</span>, <span class="dt">season_end_year =</span> <span class="dv">2018</span>, <span class="dt">tier =</span> <span class="st">&quot;&quot;</span>, <span class="dt">non_dom_league_url =</span> <span class="st">&quot;https://fbref.com/en/comps/218/history/Friendlies-M-Seasons&quot;</span>)</code></pre></div>
<div id="more-than-one-league-season-1" class="section level4">
<h4>More than one league season</h4>
<p>The <code>get_match_results()</code> function can be used to get data for multiple seasons/leagues/genders/etc also:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">big_5_2020_results &lt;-<span class="st"> </span><span class="kw">get_match_results</span>(<span class="dt">country =</span> <span class="kw">c</span>(<span class="st">&quot;ENG&quot;</span>, <span class="st">&quot;ESP&quot;</span>, <span class="st">&quot;ITA&quot;</span>, <span class="st">&quot;GER&quot;</span>, <span class="st">&quot;FRA&quot;</span>),
                                        <span class="dt">gender =</span> <span class="st">&quot;M&quot;</span>, <span class="dt">season_end_year =</span> <span class="dv">2020</span>, <span class="dt">tier =</span> <span class="st">&quot;1st&quot;</span>)</code></pre></div>
</div>
</div>
<div id="get-match-report" class="section level3">
<h3>Get match report</h3>
<p>This function will return similar results to that of <code>get_match_results()</code>, however <code>get_match_report()</code> will provide some additional information. It will also only provide it for a single match, not the whole season:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># function to extract match report data</span>
liv_mci_<span class="dv">2020</span> &lt;-<span class="st"> </span><span class="kw">get_match_report</span>(<span class="dt">match_url =</span> <span class="st">&quot;https://fbref.com/en/matches/47880eb7/Liverpool-Manchester-City-November-10-2019-Premier-League&quot;</span>)</code></pre></div>
</div>
<div id="get-match-summaries" class="section level3">
<h3>Get match summaries</h3>
<p>This function will return the main events that occur during a match, including goals, substitutions and red/yellow cards:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># function to extract match summary data</span>
liv_mci_2020_summary &lt;-<span class="st"> </span><span class="kw">get_match_summary</span>(<span class="dt">match_url =</span> <span class="st">&quot;https://fbref.com/en/matches/47880eb7/Liverpool-Manchester-City-November-10-2019-Premier-League&quot;</span>)</code></pre></div>
</div>
<div id="get-match-lineups" class="section level3">
<h3>Get match lineups</h3>
<p>This function will return a dataframe of all players listed for that match, including whether they started on the pitch, or on the bench.</p>
<p>From version 0.2.7, this function now also returns some summary performance data for each player that played, including their position, minutes played, goals, cards, etc.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># function to extract match lineups</span>
liv_mci_2020_lineups &lt;-<span class="st"> </span><span class="kw">get_match_lineups</span>(<span class="dt">match_url =</span> <span class="st">&quot;https://fbref.com/en/matches/47880eb7/Liverpool-Manchester-City-November-10-2019-Premier-League&quot;</span>)</code></pre></div>
</div>
<div id="get-shooting-and-shot-creation-events" class="section level3">
<h3>Get shooting and shot creation events</h3>
<p>The below function allows users to extract shooting and shot creation event data for a match or selected matches. The data returned includes who took the shot, when, with which body part and from how far away. Additionally, the player creating the chance and also the creation before this are included in the data.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">shot_one_match &lt;-<span class="st"> </span><span class="kw">get_match_shooting</span>(<span class="dt">match_url =</span> <span class="st">&quot;https://fbref.com/en/matches/a3eb7a37/Sheffield-United-Wolverhampton-Wanderers-September-14-2020-Premier-League&quot;</span>)

test_urls_multiple &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;https://fbref.com/en/matches/c0996cac/Bordeaux-Nantes-August-21-2020-Ligue-1&quot;</span>,
                        <span class="st">&quot;https://fbref.com/en/matches/9cbccb37/Dijon-Angers-August-22-2020-Ligue-1&quot;</span>,
                        <span class="st">&quot;https://fbref.com/en/matches/f96cd5a0/Lorient-Strasbourg-August-23-2020-Ligue-1&quot;</span>)
shot_multiple_matches &lt;-<span class="st"> </span><span class="kw">get_match_shooting</span>(test_urls_multiple)</code></pre></div>
</div>
<div id="get-advanced-match-statistics" class="section level3">
<h3>Get advanced match statistics</h3>
<p>The <code>get_advanced_match_stats()</code> function allows the user to return a data frame of different stat types for matches played.</p>
<p>Note, some stats may not be available for all leagues. The big five European leagues should have all of these stats.</p>
<p>The following stat types can be selected:</p>
<ul>
<li><em>summary</em></li>
<li><em>passing</em></li>
<li><em>passing_types</em></li>
<li><em>defense</em></li>
<li><em>possession</em></li>
<li><em>misc</em></li>
<li><em>keeper</em></li>
</ul>
<p>The function can be used for either all players individually:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">test_urls_multiple &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;https://fbref.com/en/matches/c0996cac/Bordeaux-Nantes-August-21-2020-Ligue-1&quot;</span>,
                        <span class="st">&quot;https://fbref.com/en/matches/9cbccb37/Dijon-Angers-August-22-2020-Ligue-1&quot;</span>,
                        <span class="st">&quot;https://fbref.com/en/matches/f96cd5a0/Lorient-Strasbourg-August-23-2020-Ligue-1&quot;</span>)

advanced_match_stats &lt;-<span class="st"> </span><span class="kw">get_advanced_match_stats</span>(<span class="dt">match_url =</span> test_urls_multiple, <span class="dt">stat_type =</span> <span class="st">&quot;possession&quot;</span>, <span class="dt">team_or_player =</span> <span class="st">&quot;player&quot;</span>)</code></pre></div>
<p>Or used for the team totals for each match:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">test_urls_multiple &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;https://fbref.com/en/matches/c0996cac/Bordeaux-Nantes-August-21-2020-Ligue-1&quot;</span>,
                        <span class="st">&quot;https://fbref.com/en/matches/9cbccb37/Dijon-Angers-August-22-2020-Ligue-1&quot;</span>,
                        <span class="st">&quot;https://fbref.com/en/matches/f96cd5a0/Lorient-Strasbourg-August-23-2020-Ligue-1&quot;</span>)

advanced_match_stats_team &lt;-<span class="st"> </span><span class="kw">get_advanced_match_stats</span>(<span class="dt">match_url =</span> test_urls_multiple, <span class="dt">stat_type =</span> <span class="st">&quot;passing_types&quot;</span>, <span class="dt">team_or_player =</span> <span class="st">&quot;team&quot;</span>)</code></pre></div>
<hr />
</div>
</div>
<div id="team-level-data" class="section level2">
<h2>Team-Level Data</h2>
<p>This section will cover off the functions to get team-level data from FBref.</p>
<div id="match-results-by-team" class="section level3">
<h3>Match Results by team</h3>
<p>To get all the results a team(s) has competed in for a season, the following function can be used. The resulting data frame output will include all game results, including any cup games played, and will accept either one, or many team URLs.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># for single teams:</span>
man_city_2021_url &lt;-<span class="st"> &quot;https://fbref.com/en/squads/b8fd03ef/Manchester-City-Stats&quot;</span>
man_city_2021_results &lt;-<span class="st"> </span><span class="kw">get_team_match_results</span>(man_city_url)
<span class="co"># get all team URLs for a league</span>
epl_2021_team_urls &lt;-<span class="st"> </span><span class="kw">fb_teams_urls</span>(<span class="st">&quot;https://fbref.com/en/comps/9/Premier-League-Stats&quot;</span>)
epl_2021_team_results &lt;-<span class="st"> </span><span class="kw">get_team_match_results</span>(<span class="dt">team_url =</span> team_urls)</code></pre></div>
<hr />
</div>
</div>
<div id="player-level-data" class="section level2">
<h2>Player-Level Data</h2>
<p>This section will cover the functions available to aid in the extraction of player season data.</p>
<p>The examples provided below in a lot of cases have the actual url (player or team) passed to them, however the suite of fbref helper functions outlined in <a href="https://jaseziv.github.io/worldfootballR/articles/extract-helper-urls.html">this helpers vignette</a> could also be used.</p>
<div id="get-player-scouting-report" class="section level3">
<h3>Get Player Scouting Report</h3>
<p>The <code>fb_player_scouting_report()</code> function takes in two inputs;</p>
<ul>
<li><code>player_url</code> - the URL of the player's main page</li>
<li><code>pos_versus</code> which can return the player's comparison against players in their &quot;primary&quot;, OR &quot;secondary&quot; position</li>
</ul>
<p>and returns the full scouting report for the player selected.</p>
<p>As of version <code>0.3.6</code>, the function now returns the scouting report of ALL available periods, not just the &quot;Last 365 Days&quot;. As a result, there is now an additional column called <code>scouting_period</code>. This column should be used to filter out the period/season you want the scouting report for:</p>
<pre><code># TO GET THE LAST 365 DAYS REPORT:
scout &lt;- fb_player_scouting_report(player_url = &quot;https://fbref.com/en/players/d70ce98e/Lionel-Messi&quot;,
                                   pos_versus = &quot;primary&quot;) %&gt;% 
               dplyr::filter(scouting_period == &quot;Last 365 Days&quot;)</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dplyr<span class="op">::</span><span class="kw">glimpse</span>(<span class="kw">fb_player_scouting_report</span>(<span class="dt">player_url =</span> <span class="st">&quot;https://fbref.com/en/players/d70ce98e/Lionel-Messi&quot;</span>, <span class="dt">pos_versus =</span> <span class="st">&quot;primary&quot;</span>))
<span class="co">#&gt; Rows: 745</span>
<span class="co">#&gt; Columns: 8</span>
<span class="co">#&gt; $ Player          &lt;chr&gt; &quot;Lionel Messi&quot;, &quot;Lionel Messi&quot;, &quot;Lionel Messi&quot;, &quot;Lione…</span>
<span class="co">#&gt; $ Versus          &lt;chr&gt; &quot;Forwards&quot;, &quot;Forwards&quot;, &quot;Forwards&quot;, &quot;Forwards&quot;, &quot;Forwa…</span>
<span class="co">#&gt; $ StatGroup       &lt;chr&gt; &quot;Standard&quot;, &quot;Standard&quot;, &quot;Standard&quot;, &quot;Standard&quot;, &quot;Stand…</span>
<span class="co">#&gt; $ Statistic       &lt;chr&gt; &quot;Goals&quot;, &quot;Assists&quot;, &quot;Non-Penalty Goals&quot;, &quot;Penalty Kick…</span>
<span class="co">#&gt; $ Per90           &lt;dbl&gt; 0.88, 0.24, 0.80, 0.08, 0.16, 0.08, 0.00, 0.69, 0.56, …</span>
<span class="co">#&gt; $ Percentile      &lt;dbl&gt; 98, 85, 98, 73, 86, 71, 58, 96, 92, 98, 98, 98, 99, 99…</span>
<span class="co">#&gt; $ BasedOnMinutes  &lt;dbl&gt; 3393, 3393, 3393, 3393, 3393, 3393, 3393, 3393, 3393, …</span>
<span class="co">#&gt; $ scouting_period &lt;chr&gt; &quot;Last 365 Days&quot;, &quot;Last 365 Days&quot;, &quot;Last 365 Days&quot;, &quot;La…</span>
dplyr<span class="op">::</span><span class="kw">glimpse</span>(<span class="kw">fb_player_scouting_report</span>(<span class="dt">player_url =</span> <span class="st">&quot;https://fbref.com/en/players/d70ce98e/Lionel-Messi&quot;</span>, <span class="dt">pos_versus =</span> <span class="st">&quot;secondary&quot;</span>))
<span class="co">#&gt; Rows: 745</span>
<span class="co">#&gt; Columns: 8</span>
<span class="co">#&gt; $ Player          &lt;chr&gt; &quot;Lionel Messi&quot;, &quot;Lionel Messi&quot;, &quot;Lionel Messi&quot;, &quot;Lione…</span>
<span class="co">#&gt; $ Versus          &lt;chr&gt; &quot;Att Mid / Wingers&quot;, &quot;Att Mid / Wingers&quot;, &quot;Att Mid / W…</span>
<span class="co">#&gt; $ StatGroup       &lt;chr&gt; &quot;Standard&quot;, &quot;Standard&quot;, &quot;Standard&quot;, &quot;Standard&quot;, &quot;Stand…</span>
<span class="co">#&gt; $ Statistic       &lt;chr&gt; &quot;Goals&quot;, &quot;Assists&quot;, &quot;Non-Penalty Goals&quot;, &quot;Penalty Kick…</span>
<span class="co">#&gt; $ Per90           &lt;dbl&gt; 0.88, 0.24, 0.80, 0.08, 0.16, 0.08, 0.00, 0.69, 0.56, …</span>
<span class="co">#&gt; $ Percentile      &lt;dbl&gt; 99, 75, 99, 87, 92, 74, 58, 99, 99, 92, 99, 99, 99, 99…</span>
<span class="co">#&gt; $ BasedOnMinutes  &lt;dbl&gt; 3393, 3393, 3393, 3393, 3393, 3393, 3393, 3393, 3393, …</span>
<span class="co">#&gt; $ scouting_period &lt;chr&gt; &quot;Last 365 Days&quot;, &quot;Last 365 Days&quot;, &quot;Last 365 Days&quot;, &quot;La…</span></code></pre></div>
</div>
<div id="get-player-season-stats" class="section level3">
<h3>Get Player Season Stats</h3>
<p>The <code>fb_player_season_stats()</code> function allows for the extraction of season totals for selected player URLs and stat_type.</p>
<p>The stat_types available for use in this function are below:</p>
<ul>
<li><em>standard</em></li>
<li><em>shooting</em></li>
<li><em>passing</em></li>
<li><em>passing_types</em></li>
<li><em>gca</em></li>
<li><em>defense</em></li>
<li><em>possession</em></li>
<li><em>playing_time</em></li>
<li><em>misc</em></li>
<li><em>keeper</em></li>
<li><em>keeper_adv</em></li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mo_shooting &lt;-<span class="st"> </span><span class="kw">fb_player_season_stats</span>(<span class="st">&quot;https://fbref.com/en/players/e342ad68/Mohamed-Salah&quot;</span>, <span class="dt">stat_type =</span> <span class="st">'shooting'</span>)

multiple_playing_time &lt;-<span class="st"> </span><span class="kw">fb_player_season_stats</span>(<span class="dt">player_url =</span> <span class="kw">c</span>(<span class="st">&quot;https://fbref.com/en/players/d70ce98e/Lionel-Messi&quot;</span>,
                                                <span class="st">&quot;https://fbref.com/en/players/dea698d9/Cristiano-Ronaldo&quot;</span>),
                                 <span class="dt">stat_type =</span> <span class="st">&quot;playing_time&quot;</span>)</code></pre></div>
</div>
<div id="the-big-5-euro-league-players" class="section level3">
<h3>The Big 5 Euro League Players</h3>
<p>The <code>fb_big5_advanced_season_stats()</code> function allows users to extract data for any of the below listed stat types for all players of the big five European leagues (EPL, La Liga, Ligue 1, Serie A, Bundesliga).</p>
<p>The stat types available for this function are below:</p>
<ul>
<li><em>standard</em></li>
<li><em>shooting</em></li>
<li><em>passing</em></li>
<li><em>passing_types</em></li>
<li><em>gca</em></li>
<li><em>defense</em></li>
<li><em>possession</em></li>
<li><em>playing_time</em></li>
<li><em>misc</em></li>
<li><em>keepers</em></li>
<li><em>keepers_adv</em></li>
</ul>
<p>The function also accepts a season or seasons and whether you want data for the player, or team.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">big5_player_possession &lt;-<span class="st"> </span><span class="kw">fb_big5_advanced_season_stats</span>(<span class="dt">season_end_year=</span> <span class="dv">2021</span>, <span class="dt">stat_type=</span> <span class="st">&quot;possession&quot;</span>, <span class="dt">team_or_player=</span> <span class="st">&quot;player&quot;</span>)</code></pre></div>
</div>
<div id="player-match-logs" class="section level3">
<h3>Player Match Logs</h3>
<p>The <code>fb_player_match_logs()</code> function allows the user to return a data frame of the match logs of different stat types for a player's matches played in a season.</p>
<p>The following stat types can be selected, depending on the player's position (ie a striker probably won't have &quot;keepers&quot; stats):</p>
<ul>
<li><em>summary</em></li>
<li><em>keepers</em></li>
<li><em>passing</em></li>
<li><em>passing_types</em></li>
<li><em>gca</em></li>
<li><em>defense</em></li>
<li><em>possession</em></li>
<li><em>misc</em></li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ederson_summary &lt;-<span class="st"> </span><span class="kw">fb_player_match_logs</span>(<span class="st">&quot;https://fbref.com/en/players/3bb7b8b4/Ederson&quot;</span>, <span class="dt">season_end_year =</span> <span class="dv">2021</span>, <span class="dt">stat_type =</span> <span class="st">'summary'</span>)</code></pre></div>
<hr />
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
